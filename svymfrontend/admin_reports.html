<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard | Course Management</title>
  <script src="./Javascripts/nav.js" defer></script>
  <script src="./Javascripts/auth.js" defer></script>
  <script src="./Javascripts/modal.js" defer></script>
  <link rel="stylesheet" href="css/nav.css" />
  <link rel="stylesheet" href="css/modal.css" />
  <link rel="stylesheet" href="css/admin_courses.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="Javascripts/admin_reports.js" defer></script>

  <style>
    :root { --primary-color: #007bff; --primary-hover: #0056b3; --secondary-color: #6c757d; --success-color: #28a745; --success-hover: #218838; --danger-color: #dc3545; --danger-hover: #c82333; --warning-color: #ffc107; --warning-hover: #e0a800; --white-bg: #ffffff; --text-color: #333333; --subtle-text: #666666; --border-color: #e9ecef; --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); }
    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.4); justify-content: center; align-items: center; padding: 20px; }
    .modal.show { display: flex; }
    .modal-content { background-color: white; margin: auto; padding: 30px; border-radius: 12px; width: 100%; max-width: 1200px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); position: relative; animation-name: animatetop; animation-duration: 0.4s; }
    .close-btn { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.2s; }
    .close-btn:hover { color: var(--text-color); }
    .course-details-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 8px 15px;
    margin-top: auto;
    font-size: 0.85em;
    color: #666;
}
    @keyframes animatetop { from { top: -300px; opacity: 0; } to { top: 0; opacity: 1; } }
    .form-row { display: flex; gap: 20px; margin-bottom: 15px; }
    .form-group { flex: 1; display: flex; flex-direction: column; }
    .form-group input, .form-group select, .form-group textarea { padding: 6px 10px; font-size: 14px; margin-top: 4px; border: 1px solid var(--border-color); border-radius: 4px; }
    .icon-btn { width: 30px; height: 30px; border: none; background: var(--primary-color); color: white; font-size: 16px; cursor: pointer; border-radius: 4px; margin-left: 5px; }
    .icon-btn:hover { background: var(--primary-hover); }
    .save-btn, .cancel-btn, .add-button { padding: 8px 16px; margin-top: 10px; cursor: pointer; border-radius: 4px; border: none; color: white; }
    .removeBtn { background: #dc3545; }
    .save-btn { background: var(--primary-color); } .save-btn:hover { background: var(--primary-hover); }
    .cancel-btn { background: #6c757d; margin-left: 10px; } .cancel-btn:hover { background: #5a6268; }
    table.module-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    table.module-table th, table.module-table td { border: 1px solid var(--border-color); padding: 8px; text-align: left; }
    table.module-table th { background: var(--white-bg); }
    /* Preview table styles */
    .preview-table-container { overflow-x: auto; overflow-y: auto; max-height: 400px; position: relative; }
    .preview-table { width: 100%; border-collapse: collapse; font-size: 14px; }
    .preview-table th, .preview-table td { border: 1px solid #ddd; padding: 8px; text-align: left; white-space: nowrap; }
    .preview-table th { background-color: #333 !important; color: white !important; position: sticky; top: 0; z-index: 1; }
    .preview-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
    .preview-table tbody tr:hover { background-color: #f1f1f1; }
    /* Dropdown styling */
    select {
      padding: 8px 12px;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      background-color: white;
      font-size: 14px;
      cursor: pointer;
      transition: border-color 0.2s;
    }
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
    }
  </style>
</head>
<body>
  <div class="hamburger" id="hamburger"><i class="fas fa-bars"></i></div>
  <div class="overlay" id="overlay"></div>
  <aside class="side-menu" id="sideMenu"></aside>

  <main class="main-content">
    <div class="header-row">
      <h1><i class="fas fa-file-alt"></i> Reports</h1>
      <input type="text" class="search-input" id="reportSearch" placeholder="Search Reports..." />
    </div>

    <div id="coursesContainer" class="courses-container">
      <div class="course-card">
        <div class="card-header">
          <h3>Students Reports</h3>
        </div>
        <div class="card-body">
          <p>Report Generation for Student Data</p>
          <div class="course-details-grid">
            <p><strong>Total Students :</strong> <span id="noOfStudents"></span></p>
            <p><strong>Total Students Active :</strong> <span id="noOfActiveStudents"></span></p>
          </div>
        </div>
        <div class="card-footer">
          <div class="footer-actions">
            <button class="edit-btn" id = "studentReportButton">
              <i class="fas fa-edit"></i> Generate Student Report
            </button>
          </div>
        </div>
      </div>
      <div class="course-card">
        <div class="card-header">
          <h3>Trainers Reports</h3>
        </div>
        <div class="card-body">
          <p>Report Generation for Trainers</p>
          <div class="course-details-grid">
            <p><strong>Total Trainers :</strong> <span id="noOfTrainers"></span></p>
            <p><strong>Total Trainers Active :</strong> <span id="noOfActiveTrainers"></span></p>
          </div>
        </div>
        <div class="card-footer">
          <div class="footer-actions">
            <button class="edit-btn" id = "trainerReportButton">
              <i class="fas fa-edit"></i> Generate Trainer Report
            </button>
          </div>
        </div>
      </div>
      <div class="course-card">
        <div class="card-header">
          <h3>Field Mobilisers Reports</h3>
        </div>
        <div class="card-body">
          <p>Report Generation for Field Mobilisers</p>
          <div class="course-details-grid">
            <p><strong>Total Field Mobilisers :</strong> <span id="noOfFieldMobilisers"></span></p>
            <p><strong>Total Field Mobilisers Active :</strong> <span id="noOfActiveFieldMobilisers"></span></p>
          </div>
        </div>
        <div class="card-footer">
          <div class="footer-actions">
            <button class="edit-btn" id = "fieldMobiliserReportButton">
              <i class="fas fa-edit"></i> Generate Field Mobiliser Report
            </button>
          </div>
        </div>
      </div>
      <div class="course-card">
        <div class="card-header">
          <h3>Courses Reports</h3>
        </div>
        <div class="card-body">
          <p>Report Generation for Courses</p>
          <div class="course-details-grid">
            <p><strong>Total Courses :</strong> <span id="noOfCourses"></span></p>
            <p><strong>Total Active Courses :</strong> <span id="noOfActiveCourses"></span></p>
          </div>
        </div>
        <div class="card-footer">
          <div class="footer-actions">
            <button class="edit-btn" id = "coursesReportButton">
              <i class="fas fa-edit"></i> Generate Courses Report
            </button>
          </div>
        </div>
      </div>
      <div class="course-card">
        <div class="card-header">
          <h3>Fee Details Reports</h3>
        </div>
        <div class="card-body">
          <p>Report Generation for Fee Details</p>
          <div class="course-details-grid">
            <p><strong>Total Transactions :</strong> <span id="noOfTransactions"></span></p>
            <p><strong>Pending Fees :</strong> <span id="pendingFees"></span></p>
          </div>
        </div>
        <div class="card-footer">
          <div class="footer-actions">
            <button class="edit-btn" id = "feeDetailsReportButton">
              <i class="fas fa-edit"></i> Generate Fee Details Report
            </button>
          </div>
        </div>
      </div>
      <div class="course-card">
        <div class="card-header">
          <h3>Attendance Reports</h3>
        </div>
        <div class="card-body">
          <p>Report Generation for Attendance</p>
          <div class="course-details-grid">
            <p><strong>Total Attendance Records :</strong> <span id="noOfAttendance"></span></p>
            <p><strong>Present Count :</strong> <span id="presentCount"></span></p>
          </div>
        </div>
        <div class="card-footer">
          <div class="footer-actions">
            <button class="edit-btn" id = "attendanceReportButton">
              <i class="fas fa-edit"></i> Generate Attendance Report
            </button>
          </div>
        </div>
      </div>
    </div>
    <div id="footer"></div>
  </main>


  <!-- Preview Modal -->
  <div id="previewModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" id="closePreviewModal">&times;</span>
      <h2 id="previewTitle">Report Preview</h2>
      <div id="previewContent" style="margin-bottom: 20px;"></div>
      <div style="text-align: center;">
        <button id="downloadBtn" class="save-btn">Download XLS</button>
        <button id="cancelBtn" class="cancel-btn">Cancel</button>
      </div>
    </div>
  </div>

  <script src="Javascripts/footer.js"></script>
</body>
</html>
